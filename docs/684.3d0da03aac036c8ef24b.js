(self.webpackChunklets_do_something_app=self.webpackChunklets_do_something_app||[]).push([[684],{684:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ExploreModule:()=>A});var s=i(583),r=i(855),n=i(38),a=i(574),c=i(796),o=i(2),l=i(555),p=i(402);function u(t,e){return new a.y(i=>{const s=t.length;if(0===s)return void i.complete();const r=new Array(s);let n=0,a=0;for(let c=0;c<s;c++){const o=(0,p.D)(t[c]);let l=!1;i.add(o.subscribe({next:t=>{l||(l=!0,a++),r[c]=t},error:t=>i.error(t),complete:()=>{n++,n!==s&&l||(a===s&&i.next(e?e.reduce((t,e,i)=>(t[e]=r[i],t),{}):r),i.complete())}}))}})}var d=i(639),f=i(452),h=i(340),v=i(841);let g=(()=>{class t{constructor(t){this.httpClient=t}getActivityFromApi(){return this.httpClient.get(h.N.baseUrl+"?"+(new Date).getTime()*Math.random())}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(v.eN))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var y=i(219);function m(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"app-card",2),d.NdJ("discardClickEvent",function(e){return d.CHM(t),d.oxw().onDiscardClick(e)})("saveClickEvent",function(e){return d.CHM(t),d.oxw().onSaveClick(e)}),d.qZA(),d.qZA()}if(2&t){const t=e.$implicit;d.Q6J("@enter",void 0)("@leave",void 0),d.xp6(1),d.Q6J("activity",t)}}const k=[{path:"",component:(()=>{class t{constructor(t,e){this.pagesService=t,this.apiService=e,this.apiDataList=[]}ngOnInit(){this.getFullGallery()}getFullGallery(){const t=[];for(let e=0;e<9;e++)t.push(this.apiService.getActivityFromApi());(function(...t){if(1===t.length){const e=t[0];if((0,c.k)(e))return u(e,null);if((0,l.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return u(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return u(t=1===t.length&&(0,c.k)(t[0])?t[0]:t,null).pipe((0,o.U)(t=>e(...t)))}return u(t,null)})(t).subscribe(t=>{t.forEach(t=>this.processCallResult(t))})}getSingleActivity(){this.apiService.getActivityFromApi().subscribe(t=>this.processCallResult(t))}processCallResult(t){this.apiDataList.find(e=>t.key===e.key)||this.pagesService.classified.find(e=>t.key===e.key)?this.getSingleActivity():setTimeout(()=>{this.apiDataList.push(this.transformData(t))},500)}transformData(t){return{activity:t.activity,type:t.type,participants:t.participants,accessibility:this.transformAccessibility(t.accessibility),price:this.transformPrice(t.price),key:t.key,list:""}}transformAccessibility(t){return t>=0&&t<=.3?"at hand":t>.3&&t<=.7?"available":t>.7&&t<=1?"challenging":"unkown"}transformPrice(t){return 0===t?"free":t>0&&t<=.3?"inexpensive":t>.3&&t<=.7?"affordable":t>.7&&t<=1?"pricey":"unkown"}addList(t,e){const i=this.apiDataList.findIndex(e=>e.key===t);this.apiDataList[i].list=e,this.pagesService.classified.push(this.apiDataList[i]),localStorage.setItem("LetsDoSomething",JSON.stringify(this.pagesService.classified)),this.apiDataList.splice(i,1),this.getSingleActivity()}onDiscardClick(t){this.addList(t.target.id,"discarded")}onSaveClick(t){this.addList(t.target.id,"saved")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(f.j),d.Y36(g))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-explore-view"]],decls:2,vars:1,consts:[[1,"gallery"],[4,"ngFor","ngForOf"],[3,"activity","discardClickEvent","saveClickEvent"]],template:function(t,e){1&t&&(d.TgZ(0,"section",0),d.YNc(1,m,2,3,"div",1),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngForOf",e.apiDataList))},directives:[s.sg,y.A],styles:[".gallery[_ngcontent-%COMP%]{max-width:992px;margin:100px auto 0;display:flex;flex-wrap:wrap;justify-content:center}"],data:{animation:[(0,n.QP)({anchor:"enter",duration:500}),(0,n.QQ)({anchor:"leave",duration:500})]}}),t})()}];let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[r.Bz.forChild(k)],r.Bz]}),t})();var b=i(24);let A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({providers:[g],imports:[[s.ez,C,v.JF,b.d]]}),t})()}}]);